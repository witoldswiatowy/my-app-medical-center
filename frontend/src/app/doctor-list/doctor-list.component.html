<div class="container">
  <div>
    <div *ngIf="authService.isLoggedIn() && authService.hasRole('ROLE_ADMIN' || 'ROLE_MODERATOR')" class="col-md-4">
      <div class="btn-group">
        <div class="mat-button mat-raised-button"
             (click)="showDiv.gallery = !showDiv.gallery;showDiv.table = false">
          Gallery
        </div>
        <div class="mat-button mat-raised-button"
             (click)="showDiv.table = !showDiv.table;showDiv.gallery = false">
          Table
        </div>
      </div>
      <div>
        <div class="mat-button mat-fab">
          <mat-icon [routerLink]="['/add_doctor']">add</mat-icon>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div *ngIf="showDiv.gallery" class="doctor-gallery">
      <mat-card *ngFor="let doctor of doctors" class="doctor-gallery-card">
        <mat-card-header>
          <div mat-card-avatar class="doctor-gallery-card-avatar"></div>
          <mat-card-title>{{doctor.firstName}} {{doctor.lastName}}</mat-card-title>
          <mat-card-subtitle>{{doctor.specialization}}</mat-card-subtitle>
        </mat-card-header>
        <div class="doctor-gallery-card-image">
        <img mat-card-image
             src={{doctor.imgUrl}} onerror="this.src='assets/defaultAvatar.png';"
             alt="Photo of dr. {{doctor.lastName}}"
             layout-fill>
        </div>
        <mat-card-content>
          <p>
            {{doctor.description}}
          </p>
        </mat-card-content>
      </mat-card>
    </div>
    <div *ngIf="showDiv.table">
      <mat-card>
        <mat-card-title>List of doctors</mat-card-title>
        <mat-card-subtitle>List of all existing doctor in db</mat-card-subtitle>
        <mat-card-content class="doctor-list" tabindex="0">
          <table mat-table [dataSource]="doctors" class="mat-elevation-z2 doctor-table">

            <ng-container matColumnDef="identifier">
              <th mat-header-cell *matHeaderCellDef>Id</th>
              <td mat-cell *matCellDef="let doctor">{{doctor.id}}</td>
            </ng-container>

            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>First name</th>
              <td mat-cell *matCellDef="let doctor">{{doctor.firstName}}</td>
            </ng-container>

            <ng-container matColumnDef="surname">
              <th mat-header-cell *matHeaderCellDef>Last name</th>
              <td mat-cell *matCellDef="let doctor">{{doctor.lastName}}</td>
            </ng-container>

            <ng-container matColumnDef="phoneNumber">
              <th mat-header-cell *matHeaderCellDef>Phone Number</th>
              <td mat-cell *matCellDef="let doctor">{{doctor.phoneNumber}}</td>
            </ng-container>

            <ng-container matColumnDef="email">
              <th mat-header-cell *matHeaderCellDef>Email</th>
              <td mat-cell *matCellDef="let doctor">{{doctor.email}}</td>
            </ng-container>

            <ng-container matColumnDef="specialization">
              <th mat-header-cell *matHeaderCellDef>Specialization</th>
              <td mat-cell *matCellDef="let doctor">{{doctor.specialization}}</td>
            </ng-container>

            <ng-container matColumnDef="hourlyRate">
              <th mat-header-cell *matHeaderCellDef>Hourly Rate</th>
              <td mat-cell *matCellDef="let doctor">{{doctor.hourlyRate}}</td>
            </ng-container>

            <ng-container matColumnDef="clinicId">
              <th mat-header-cell *matHeaderCellDef>Clinic id</th>
              <td mat-cell *matCellDef="let doctor">{{doctor.clinic.id}}</td>
            </ng-container>

            <ng-container matColumnDef="clinicName">
              <th mat-header-cell *matHeaderCellDef>Clinic name</th>
              <td mat-cell *matCellDef="let doctor">{{doctor.clinic.name}}</td>
            </ng-container>

            <ng-container matColumnDef="delete-button">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let doctor">
                <button class="record-delete-button" mat-button mat-raised-button color="warn"
                        (click)="deleteDoctor(doctor.id)">Delete
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

          </table>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>


